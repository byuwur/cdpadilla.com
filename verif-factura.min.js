function restoreResponse(){$("#verif-response").removeClass("alert-info alert-danger alert-success alert-warning"),$("#verif-response").html("")}function verificarFactura(){restoreResponse(),$("#verif-response").addClass("alert-info"),$("#verif-response").html('<strong>Está verificándose la existencia de la factura "'+$("#verif-prefijo").val()+$("#verif-factura").val()+'".</strong><hr><p>Espere un momento...</p>'),$.ajax({url:"verif-factura.php",type:"POST",dataType:"json",data:$("#verif-form").serialize(),success:function(a){$.each(a,function(a,e){restoreResponse(),e.error?($("#verif-response").addClass(e.status),$("#verif-response").html(e.message),$("#option-pay").prop("disabled",!0),$("#a-pagador").css({display:"none",opacity:"0"}),$amount="",$pago=1,$name="",$description="",$invoice=""):($("#verif-response").addClass(e.status),$("#verif-response").html(e.message),$("#option-pay").prop("disabled",!1),$("#a-pagador").css({display:"block",opacity:"1"}),$amount=e.valor,$pago=e.pago,$name=e.concepto,$description=e.descripcion,$invoice=e.factura)})}})}function verificarDatosForm(a){var e=$(a),o=e.find("input:required"),t=e.find("input[type='submit']");return t.prop("disabled",!0),o.keyup(function(){e.data("filled",1),o.each(function(){""==$(this).val()&&e.data("filled",0)})}),1==e.data("filled")?1:0==!e.data("filled")?0:void 0}function verificarBtnPay(){verificarDatosForm("#pay-form")?($("#btn-pay").css({display:"block",opacity:"1"}),0==$pago?$("#btn-pay").html('<script src="https://checkout.epayco.co/checkout.js" class="epayco-button" data-epayco-external="false" data-epayco-key="a786759b00b28afdfe9a4b9249eaf6a1" data-epayco-amount="'+$amount+'" data-epayco-name="'+$name+'" data-epayco-description="'+$description+'" data-epayco-currency="cop" data-epayco-country="co" data-epayco-lang="es" data-epayco-test="true" data-epayco-invoice="'+$invoice+'" data-epayco-button="./img/btn-pay.png" data-epayco-response="./pay-done.php" data-epayco-autoclick="false" data-epayco-email-billing="'+$("#pay-email").val()+'" data-epayco-name-billing="'+$("#pay-name").val()+'" data-epayco-type-doc-billing="'+$("#pay-tipo-doc").val()+'" data-epayco-number-doc-billing="'+$("#pay-nuip").val()+'" data-epayco-mobilephone-billing="'+$("#pay-phone").val()+'" data-epayco-address-billing="'+$("#pay-address").val()+'" >'):1==$pago&&$("#btn-pay").html("LA FACTURA YA HA SIDO PAGADA.")):($("#btn-pay").css({display:"none",opacity:"0"}),$("#btn-pay").html(""))}var $amount,$pago,$name,$description,$invoice;$("#verif-factura").focus(),$("#verif-form").submit(function(a){a.preventDefault()}),$("#pay-form").submit(function(a){a.preventDefault()}),$("#pay-form").keyup(verificarBtnPay),$("#pay-tipo-doc").change(verificarBtnPay),$("#verif-form").keyup(function(){verificarFactura(),verificarBtnPay()}),$("#verif-prefijo").change(function(){verificarFactura(),verificarBtnPay()});